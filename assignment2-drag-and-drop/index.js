var users = [{
    "id": 1,
    "first_name": "Marlena",
    "last_name": "Ferier",
    "gender": "Female"
}, {
    "id": 2,
    "first_name": "Concordia",
    "last_name": "Flaonier",
    "gender": "Female"
}, {
    "id": 3,
    "first_name": "Leah",
    "last_name": "Pinckney",
    "gender": "Female"
}, {
    "id": 4,
    "first_name": "Bronnie",
    "last_name": "Ferminger",
    "gender": "Male"
}, {
    "id": 5,
    "first_name": "Rici",
    "last_name": "Crosi",
    "gender": "Female"
}, {
    "id": 6,
    "first_name": "Erl",
    "last_name": "Padmore",
    "gender": "Male"
}, {
    "id": 7,
    "first_name": "Donetta",
    "last_name": "Sainz",
    "gender": "Female"
}, {
    "id": 8,
    "first_name": "Alan",
    "last_name": "McDuall",
    "gender": "Male"
}, {
    "id": 9,
    "first_name": "Clayborne",
    "last_name": "Shafto",
    "gender": "Male"
}, {
    "id": 10,
    "first_name": "Corney",
    "last_name": "Flett",
    "gender": "Male"
}, {
    "id": 11,
    "first_name": "Abby",
    "last_name": "Lippiatt",
    "gender": "Male"
}, {
    "id": 12,
    "first_name": "Corty",
    "last_name": "Foster-Smith",
    "gender": "Male"
}, {
    "id": 13,
    "first_name": "Dinah",
    "last_name": "Meffan",
    "gender": "Female"
}, {
    "id": 14,
    "first_name": "Spike",
    "last_name": "Longo",
    "gender": "Male"
}, {
    "id": 15,
    "first_name": "Shaughn",
    "last_name": "Lufkin",
    "gender": "Male"
}, {
    "id": 16,
    "first_name": "Shena",
    "last_name": "Buckenham",
    "gender": "Female"
}, {
    "id": 17,
    "first_name": "Alberto",
    "last_name": "Bambury",
    "gender": "Male"
}, {
    "id": 18,
    "first_name": "Alfie",
    "last_name": "Joincey",
    "gender": "Female"
}, {
    "id": 19,
    "first_name": "Bess",
    "last_name": "Hayter",
    "gender": "Female"
}, {
    "id": 20,
    "first_name": "Stephie",
    "last_name": "Boss",
    "gender": "Female"
}, {
    "id": 21,
    "first_name": "Helge",
    "last_name": "Laight",
    "gender": "Female"
}, {
    "id": 22,
    "first_name": "Isa",
    "last_name": "Tucknott",
    "gender": "Male"
}, {
    "id": 23,
    "first_name": "Alexio",
    "last_name": "Labes",
    "gender": "Male"
}, {
    "id": 24,
    "first_name": "Brigit",
    "last_name": "Matashkin",
    "gender": "Female"
}, {
    "id": 25,
    "first_name": "Christoper",
    "last_name": "Whitmarsh",
    "gender": "Male"
}, {
    "id": 26,
    "first_name": "Ralf",
    "last_name": "Penbarthy",
    "gender": "Male"
}, {
    "id": 27,
    "first_name": "Stephana",
    "last_name": "Todd",
    "gender": "Female"
}, {
    "id": 28,
    "first_name": "Pauly",
    "last_name": "Tremellier",
    "gender": "Male"
}, {
    "id": 29,
    "first_name": "Yvonne",
    "last_name": "Mourbey",
    "gender": "Female"
}, {
    "id": 30,
    "first_name": "Reinald",
    "last_name": "Teasdale-Markie",
    "gender": "Male"
}, {
    "id": 31,
    "first_name": "Nadia",
    "last_name": "Pearcey",
    "gender": "Female"
}, {
    "id": 32,
    "first_name": "Jojo",
    "last_name": "Bumphries",
    "gender": "Female"
}, {
    "id": 33,
    "first_name": "Dorian",
    "last_name": "Brewitt",
    "gender": "Male"
}, {
    "id": 34,
    "first_name": "Odo",
    "last_name": "Hars",
    "gender": "Male"
}, {
    "id": 35,
    "first_name": "Perkin",
    "last_name": "Sexton",
    "gender": "Male"
}, {
    "id": 36,
    "first_name": "Anna-diana",
    "last_name": "Grimsell",
    "gender": "Female"
}, {
    "id": 37,
    "first_name": "Evangelin",
    "last_name": "Bordis",
    "gender": "Female"
}, {
    "id": 38,
    "first_name": "Linus",
    "last_name": "Sterndale",
    "gender": "Male"
}, {
    "id": 39,
    "first_name": "Haslett",
    "last_name": "Tick",
    "gender": "Male"
}, {
    "id": 40,
    "first_name": "Mohandas",
    "last_name": "O'Doghesty",
    "gender": "Male"
}, {
    "id": 41,
    "first_name": "Regan",
    "last_name": "Woolard",
    "gender": "Female"
}, {
    "id": 42,
    "first_name": "Lorrie",
    "last_name": "Philipsohn",
    "gender": "Male"
}, {
    "id": 43,
    "first_name": "Aubrette",
    "last_name": "Martschik",
    "gender": "Female"
}, {
    "id": 44,
    "first_name": "Mallory",
    "last_name": "Sheers",
    "gender": "Male"
}, {
    "id": 45,
    "first_name": "Philbert",
    "last_name": "Phifer",
    "gender": "Male"
}, {
    "id": 46,
    "first_name": "Samara",
    "last_name": "Ashe",
    "gender": "Female"
}, {
    "id": 47,
    "first_name": "Finn",
    "last_name": "Schach",
    "gender": "Male"
}, {
    "id": 48,
    "first_name": "Shelton",
    "last_name": "Jansa",
    "gender": "Male"
}, {
    "id": 49,
    "first_name": "Bancroft",
    "last_name": "Rolf",
    "gender": "Male"
}, {
    "id": 50,
    "first_name": "Town",
    "last_name": "Madle",
    "gender": "Male"
}, {
    "id": 51,
    "first_name": "Baily",
    "last_name": "Bosenworth",
    "gender": "Male"
}, {
    "id": 52,
    "first_name": "Doralynn",
    "last_name": "Kerins",
    "gender": "Female"
}, {
    "id": 53,
    "first_name": "Worth",
    "last_name": "Gosland",
    "gender": "Male"
}, {
    "id": 54,
    "first_name": "Nevile",
    "last_name": "Kupec",
    "gender": "Male"
}, {
    "id": 55,
    "first_name": "Erinna",
    "last_name": "Bundey",
    "gender": "Female"
}, {
    "id": 56,
    "first_name": "Shelby",
    "last_name": "Pywell",
    "gender": "Male"
}, {
    "id": 57,
    "first_name": "Joanna",
    "last_name": "Napoli",
    "gender": "Female"
}, {
    "id": 58,
    "first_name": "Enrique",
    "last_name": "Crathorne",
    "gender": "Male"
}, {
    "id": 59,
    "first_name": "Ivan",
    "last_name": "Mersh",
    "gender": "Male"
}, {
    "id": 60,
    "first_name": "Dorrie",
    "last_name": "Elderbrant",
    "gender": "Female"
}, {
    "id": 61,
    "first_name": "Nero",
    "last_name": "Redley",
    "gender": "Male"
}, {
    "id": 62,
    "first_name": "Bert",
    "last_name": "Laurencot",
    "gender": "Male"
}, {
    "id": 63,
    "first_name": "Raquela",
    "last_name": "Ellsbury",
    "gender": "Female"
}, {
    "id": 64,
    "first_name": "Phyllis",
    "last_name": "Bauchop",
    "gender": "Female"
}, {
    "id": 65,
    "first_name": "Gregoor",
    "last_name": "Berth",
    "gender": "Male"
}, {
    "id": 66,
    "first_name": "Chelsae",
    "last_name": "Petheridge",
    "gender": "Female"
}, {
    "id": 67,
    "first_name": "Sarena",
    "last_name": "Wabersich",
    "gender": "Female"
}, {
    "id": 68,
    "first_name": "Jaclyn",
    "last_name": "Antosik",
    "gender": "Female"
}, {
    "id": 69,
    "first_name": "Kile",
    "last_name": "Duprey",
    "gender": "Male"
}, {
    "id": 70,
    "first_name": "Bertrand",
    "last_name": "Hugill",
    "gender": "Male"
}, {
    "id": 71,
    "first_name": "Berkie",
    "last_name": "Diver",
    "gender": "Male"
}, {
    "id": 72,
    "first_name": "Milzie",
    "last_name": "Olivie",
    "gender": "Female"
}, {
    "id": 73,
    "first_name": "Gwyneth",
    "last_name": "Geck",
    "gender": "Female"
}, {
    "id": 74,
    "first_name": "Jarrad",
    "last_name": "Spore",
    "gender": "Male"
}, {
    "id": 75,
    "first_name": "Blakeley",
    "last_name": "Silburn",
    "gender": "Female"
}, {
    "id": 76,
    "first_name": "Katee",
    "last_name": "Dykins",
    "gender": "Female"
}, {
    "id": 77,
    "first_name": "Ianthe",
    "last_name": "Starkings",
    "gender": "Female"
}, {
    "id": 78,
    "first_name": "Thibaud",
    "last_name": "Court",
    "gender": "Male"
}, {
    "id": 79,
    "first_name": "Justine",
    "last_name": "Whaley",
    "gender": "Female"
}, {
    "id": 80,
    "first_name": "Ermina",
    "last_name": "Gurnay",
    "gender": "Female"
}, {
    "id": 81,
    "first_name": "Mina",
    "last_name": "Hedge",
    "gender": "Female"
}, {
    "id": 82,
    "first_name": "Lurleen",
    "last_name": "Fray",
    "gender": "Female"
}, {
    "id": 83,
    "first_name": "Kessiah",
    "last_name": "Keetch",
    "gender": "Female"
}, {
    "id": 84,
    "first_name": "Sal",
    "last_name": "Jacop",
    "gender": "Male"
}, {
    "id": 85,
    "first_name": "Brad",
    "last_name": "Borlease",
    "gender": "Male"
}, {
    "id": 86,
    "first_name": "Bay",
    "last_name": "Frowde",
    "gender": "Male"
}, {
    "id": 87,
    "first_name": "Devland",
    "last_name": "Pilipets",
    "gender": "Male"
}, {
    "id": 88,
    "first_name": "Kurtis",
    "last_name": "Bendson",
    "gender": "Male"
}, {
    "id": 89,
    "first_name": "Alard",
    "last_name": "Soles",
    "gender": "Male"
}, {
    "id": 90,
    "first_name": "Nedda",
    "last_name": "Lelande",
    "gender": "Female"
}, {
    "id": 91,
    "first_name": "Raymond",
    "last_name": "Radbourne",
    "gender": "Male"
}, {
    "id": 92,
    "first_name": "Fielding",
    "last_name": "Saville",
    "gender": "Male"
}, {
    "id": 93,
    "first_name": "Sissie",
    "last_name": "Southgate",
    "gender": "Female"
}, {
    "id": 94,
    "first_name": "Rob",
    "last_name": "Le Barre",
    "gender": "Male"
}, {
    "id": 95,
    "first_name": "Rockie",
    "last_name": "Hawsby",
    "gender": "Male"
}, {
    "id": 96,
    "first_name": "Aubree",
    "last_name": "Ellin",
    "gender": "Female"
}, {
    "id": 97,
    "first_name": "Wrennie",
    "last_name": "Gannon",
    "gender": "Female"
}, {
    "id": 98,
    "first_name": "Gerrard",
    "last_name": "Flowerdew",
    "gender": "Male"
}, {
    "id": 99,
    "first_name": "Jeanette",
    "last_name": "Stares",
    "gender": "Female"
}, {
    "id": 100,
    "first_name": "Joelynn",
    "last_name": "Broggelli",
    "gender": "Female"
}];

function onRemove(ev) {
    console.log('on remove ', ev.target.previousSibling)
    ev.target.parentNode.parentNode.style.border = '1px solid gray';
    ev.target.parentNode.parentNode.style.background = 'white';

    ev.target.parentNode.parentNode.setAttribute("ondragexit", "ondragexit_handler(event)");
    ev.target.parentNode.parentNode.setAttribute("ondragenter", "ondargenter_handler(event)");
    ev.target.parentNode.parentNode.setAttribute("ondragleave", "ondragleave_handler(event)");
    ev.target.parentNode.parentNode.setAttribute("ondrop", "drop_handler(event);");
    ev.target.parentNode.parentNode.setAttribute("ondragover", "dragover_handler(event)");

    var elements = document.getElementById("myList");
    ev.target.previousSibling.setAttribute("draggable", true)
    ev.target.previousSibling.style.display = 'block';
    ev.target.previousSibling.style.borderTopRightRadius = '5px';
    ev.target.previousSibling.style.borderBottomRightRadius = '5px';
    ev.target.previousSibling.style.marginBottom = '4px';
    elements.insertBefore(ev.target.previousSibling, elements.firstChild);
    ev.target.parentNode.parentNode.removeChild(ev.target.parentNode);




}
function drag_handler(ev) {
    // console.log("Drag");
}

function dragstart_handler(ev) {
    // console.log("dragStart",ev);
    ev.dataTransfer.setData("text", ev.target.id);
}

function ondargenter_handler(ev) {
    ev.target.style.background = "green";
}

function ondragexit_handler(ev) {
    console.log('on drag exit')
    // ev.target.style.background = "white";
}
function ondragleave_handler(ev) {
    console.log('on drag leave', ev.currentTarget.style.cssText.indexOf('gray'))
    ev.target.style.background = "white";
}


function drop_handler(ev) {
    // console.log("Drop",ev);
    ev.currentTarget.style.border = 0;
    ev.currentTarget.style.background = "lightyellow";
    ev.currentTarget.removeAttribute('ondragexit')
    ev.currentTarget.removeAttribute('ondragenter')
    ev.currentTarget.removeAttribute('ondragleave')
    ev.currentTarget.removeAttribute('ondrop')
    ev.currentTarget.removeAttribute('ondragover')
    // ev.currentTarget.appendChild('<button></button>')

    ev.preventDefault();
    var data = ev.dataTransfer.getData("text");

    // var tempElement = document.getElementById(ev.target.id);
    var z = document.createElement('div'); // is a node
    z.style.display = 'flex';
    z.style.flexDirection = 'row'
    z.appendChild(document.getElementById(data));
    z.innerHTML = z.innerHTML + '<button onclick="onRemove(event)"> x </button>'
    z.firstChild.setAttribute("draggable", false);
    z.firstChild.style.display = 'flex';
    z.firstChild.style.flex = '9 9';
    z.firstChild.style.borderTopRightRadius = 0;
    z.firstChild.style.borderBottomRightRadius = 0;
    z.firstChild.style.marginBottom = 0;

    console.log('Data ')

    ev.target.appendChild(z);
    // ev.target.appendChild()
}

function dragover_handler(ev) {
    // console.log("dragOver");
    ev.preventDefault();
}

var elements = document.getElementById("myList");
// var dropableElements = document.getElementById("dropSection");
var col1Element = document.getElementById('col1')
var col2Element = document.getElementById('col2')
var col3Element = document.getElementById('col3')
// var tempDropRow = 
for (var i = 1; i <= users.length; i++) {

    // var elem = document.createElement("div");
    // elem.className = 'list-item'
    // elem.ondrag = 'drag_handler(event);'
    // elem.ondragstart = 'dragstart_handler(event);'
    // elem.draggable = 'true'
    elements.innerHTML = elements.innerHTML + '<div id="' + i + '" class="list-item" ondrag="drag_handler(event);" ondragstart="dragstart_handler(event);" draggable="true">' + users[i - 1].first_name + ' ' + users[i - 1].last_name + '</Div>';
    // users[i].first_name + ' ' +users[i].last_name;

    // elements.appendChild(elem);
    if (i % 3 == 1) {
        col1Element.innerHTML = col1Element.innerHTML + '<div id="s' + i +
            '" class="dropable-element" ondragenter="ondargenter_handler(event)"+ ondragexit="ondragexit_handler(event)" ondragleave="ondragleave_handler(event)" ondrop="drop_handler(event);" ondragover="dragover_handler(event);"></div>'
    } else if (i % 3 == 2) {
        col2Element.innerHTML = col2Element.innerHTML + '<div id="s' + i +
            '" class="dropable-element" ondragenter="ondargenter_handler(event)"  ondragexit="ondragexit_handler(event)" ondragleave="ondragleave_handler(event)" ondrop="drop_handler(event);" ondragover="dragover_handler(event);"></div>'
    } else {
        col3Element.innerHTML = col3Element.innerHTML + '<div id="s' + i +
            '" class="dropable-element" ondragenter="ondargenter_handler(event)"  ondragexit="ondragexit_handler(event)" ondragleave="ondragleave_handler(event)" ondrop="drop_handler(event);" ondragover="dragover_handler(event);"></div>'
    }

}
